Last-Update: 2016-11-19
Forwarded: no
Author: Dmitry Smirnov <onlyjob@member.fsf.org>
Description: improve/fix search for "libproj.so".

--- a/frontend/linux/workbench/mysql-workbench.in
+++ b/frontend/linux/workbench/mysql-workbench.in
@@ -17,19 +17,9 @@
 wblibdir="$destdir@WB_INSTALL_LIB_DIR@"
 
 
 # Set the PROJSO env variable so gdal can find proj cause it's using dlopen instead ld 
-PROJLOC=""
-for lib in libproj.so.0 libproj.so.9
-do
-  for loc in /usr/lib /usr/lib64 /usr/lib/x86_64-linux-gnu
-  do
-    if test -f "$loc/$lib"; then
-       PROJLOC="$loc/$lib"
-       break 2
-    fi
-  done
-done
+PROJLOC="$(ldd /usr/lib/mysql-workbench/mysql-workbench-bin | awk '/libproj.so/{print $3}')"
 
 if [ -z "$PROJLOC" ]; then
   echo "Workbench can't find libproj.so, some options may be unavailable."
 else
