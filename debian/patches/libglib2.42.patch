Last-Update: 2014-10-16
Forwarded: not-needed
From: Marcin Szalowicz <marcin.szalowicz@oracle.com>
Origin: upstream
Bug-Upstream: http://bugs.mysql.com/bug.php?id=74147
Bug-Debian: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=763356
Description: libglib_2.42 compatibility fix

--- a/frontend/linux/linux_utilities/listmodel_wrapper.cpp
+++ b/frontend/linux/linux_utilities/listmodel_wrapper.cpp
@@ -527,9 +527,8 @@
 
 ListModelWrapper::ListModelWrapper(bec::ListModel* tm, Gtk::TreeView *treeview, const std::string& name)
                     : Glib::ObjectBase(typeid(ListModelWrapper))
                     , Glib::Object()
-                    , Gtk::TreeModel()
                     , _treeview(treeview)
                     , _iconview(0)
                     , _context_menu(0)
                     , _stamp(1)
--- a/frontend/linux/linux_utilities/listmodel_wrapper.h
+++ b/frontend/linux/linux_utilities/listmodel_wrapper.h
@@ -231,11 +231,18 @@
 }
 
 //==============================================================================
 
-class ListModelWrapper : public Glib::Object, public Gtk::TreeModel, 
+#if GLIB_CHECK_VERSION(2, 42, 0)
+class ListModelWrapper : public Gtk::TreeModel, public Glib::Object,
                          public Gtk::TreeDragDest, public Gtk::TreeDragSource,
                          public base::trackable
+#else
+class ListModelWrapper : public Glib::Object, public Gtk::TreeModel,
+                         public Gtk::TreeDragDest, public Gtk::TreeDragSource,
+                         public base::trackable
+
+#endif
 {
      friend class ColumnsModel;
   protected:
      void model_changed(const bec::NodeId &, int)
